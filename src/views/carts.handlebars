<!-- Título principal de la página -->
<h1>Carrito de Compras</h1>

<!-- Inicia un bloque para iterar sobre cada producto en el carrito -->
{{#each products}}
  <div class="product">
    <!-- Muestra el nombre del producto -->
    <h2>{{this.product.title}}</h2>
    <!-- Muestra la cantidad de unidades del producto en el carrito -->
    <p>Cantidad: {{this.quantity}}</p>
    <!-- Muestra el precio por unidad del producto -->
    <p>Precio: ${{this.product.price}}</p>
    <!-- Muestra el subtotal del producto (cantidad * precio) -->
    <p>Subtotal: ${{multiply this.quantity this.product.price}}</p>
  </div>
{{/each}}

<!-- Sección para mostrar el total de la compra -->
{{#if products.length}}
  <div class="total">
    <h3>Total de la Compra:</h3>
    <p>${{calculateTotal products}}</p>
  </div>
  <!-- Formulario para finalizar la compra -->
  <form action="/api/carts/{{cartId}}/purchase" method="POST">
    <button type="submit">Finalizar Compra</button>
  </form>
{{else}}
  <p>No hay productos en el carrito.</p>
{{/if}}
